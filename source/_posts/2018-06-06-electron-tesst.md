---
title: 一次 electron 尝试
date: 2018-06-06 14:33:09
tags: electron
---

还是那个给行政写的小软件，最近打算离职了，担心行政以后没的用，就想有个方法来让没有 node.js 环境的人也能使用。

# electron

简单查资料后，就瞄上了 Electron ，github 出产的打通前端与 pc 端的神器框架，毕竟现在的需求也是如此，就是让用户在没有环境的情况下在电脑使用我们的小软件；

当然也考虑过做服务器，让用户在网页操作，但这样的话，远的不说，近的就要写服务器，上传下载，信息还有保密性，要写安全相关，又不能让所有人都用，简单用户系统要写，简单建站用 PHP 是很合适的，但又要加学习成本。。。

最后还不如用 Electron 做简单打包，因为不需要什么依赖，直接放到u盘里，谁持有u盘谁来保证安全性就好。

# 过程

说实话，意外的简单这个事，从网上下了一个 Quick-start ，把 node.js 里的逻辑代码简单粗暴地结合进去，然后第一次跑程序就跑通了；

我甚至连文档一眼都没看，然后安装 electron-packager 打包神器，运行指令：

```
electron-packager . app --win --out presenterTool --arch=x64 --electron-version 2.0.2 --overwrite --ignore=node_modules
```

然后就打包成功了，一切顺利的有些不自然。。。

# electron 使用 node.js fs 模块失败

果然实际到别人的机子测试后失败了。。。没有报错，纯粹的不写入文件，着急的找文档看，临时抱佛脚，结果越看越着急，反而解决不了问题。

这时候想到可能还是依赖的问题，别人的电脑与我的电脑最大的区别就是没有 node.js 环境，然后点开 node.js 的依赖文件夹 node_modules；

一对比果然：electron 生成的依赖文件夹和 node.js 中生成的差了很多依赖文件夹，于是把外面 node.js 生成的依赖放进去，然后再次到别人电脑测试，就跑通了。